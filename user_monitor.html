<!DOCTYPE html>
<html lang="mr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SunPower | Admin User Monitor</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.1.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.0/firebase-firestore-compat.js"></script>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root { --sun-blue: #1e3a8a; --sun-yellow: #facc15; --dark-bg: #020617; --card-bg: #0f172a; }
        body { background-color: var(--dark-bg); font-family: 'Segoe UI', sans-serif; margin: 0; color: white; }
        
        .header { 
            padding: 15px 20px; background: var(--sun-blue); 
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 3px solid var(--sun-yellow); position: sticky; top: 0; z-index: 100;
        }

        .stats-bar { background: #1e293b; padding: 10px 20px; font-size: 13px; color: #4ade80; }

        .user-container { padding: 15px; }

        .user-card {
            background: var(--card-bg); border-radius: 12px; padding: 15px; margin-bottom: 12px;
            border-left: 5px solid var(--sun-yellow); box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .user-name { font-size: 17px; font-weight: bold; color: var(--sun-yellow); }
        .user-balance { font-size: 18px; color: #4ade80; font-weight: bold; }

        .details-grid { 
            display: grid; grid-template-columns: 1fr; gap: 8px; 
            font-size: 13px; background: rgba(255,255,255,0.03); padding: 10px; border-radius: 8px;
        }

        .detail-item { color: #cbd5e1; display: flex; align-items: center; gap: 10px; }
        .detail-item i { color: var(--sun-yellow); width: 15px; }

        .loading-screen { text-align: center; padding: 50px; color: #94a3b8; font-size: 14px; }
        #totalCount { background: white; color: black; padding: 2px 10px; border-radius: 10px; font-weight: bold; }
    </style>
</head>
<body>

<div class="header">
    <div style="display:flex; align-items:center; gap:10px;">
        <i class="fas fa-user-shield" style="font-size: 20px; color: var(--sun-yellow);"></i>
        <h3 style="margin:0;">User Monitor</h3>
    </div>
    <div id="totalCount">0</div>
</div>

<div class="stats-bar">
    <i class="fas fa-bolt"></i> Real-time Firestore Connection Active
</div>

<div class="user-container" id="userList">
    <div class="loading-screen">
        <i class="fas fa-spinner fa-spin"></i><br><br>
        डेटा लोड होत आहे, थोडा वेळ थांबा...
    </div>
</div>

<script>
    // तुझी Firestore Configuration
    const firebaseConfig = {
        apiKey: "AIzaSyA3k5ByUuJ-1jtVovgZMxsw1LBaBkn_nDo",
        authDomain: "new-investment-web.firebaseapp.com",
        projectId: "new-investment-web",
        storageBucket: "new-investment-web.firebasestorage.app",
        messagingSenderId: "1078188475858",
        appId: "1:1078188475858:web:b3777ea127aae8e083740b"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Firestore मधून 'users' कलेक्शनचा डेटा वाचणे
    db.collection("users").onSnapshot((querySnapshot) => {
        const userListDiv = document.getElementById('userList');
        userListDiv.innerHTML = "";
        let count = 0;

        querySnapshot.forEach((doc) => {
            const user = doc.data();
            count++;
            
            const card = `
                <div class="user-card">
                    <div class="card-header">
                        <div class="user-name"><i class="fas fa-user-circle"></i> ${user.name || 'No Name'}</div>
                        <div class="user-balance">₹${user.balance || 0}</div>
                    </div>
                    
                    <div class="details-grid">
                        <div class="detail-item"><i class="fas fa-phone"></i> Mobile: ${user.mobile || 'N/A'}</div>
                        <div class="detail-item"><i class="fas fa-university"></i> Bank: ${user.bank_name || 'Not Linked'}</div>
                        <div class="detail-item"><i class="fas fa-id-card-alt"></i> Account: ${user.account_number || 'N/A'}</div>
                        <div class="detail-item"><i class="fas fa-key"></i> IFSC: ${user.ifsc || 'N/A'}</div>
                    </div>

                    <div style="font-size:10px; color:#64748b; margin-top:10px; text-align:right;">
                        User ID: ${doc.id}
                    </div>
                </div>
            `;
            userListDiv.insertAdjacentHTML('afterbegin', card);
        });
        document.getElementById('totalCount').innerText = count;

        if(count === 0) {
            userListDiv.innerHTML = '<div class="loading-screen">अजून कोणीही युजर नाही!</div>';
        }
    }, (error) => {
        console.error("Error: ", error);
        document.getElementById('userList').innerHTML = '<div class="loading-screen" style="color:red;">एरर: Rules चेक करा किंवा नेट तपासा!</div>';
    });
</script>

</body>
</html>
